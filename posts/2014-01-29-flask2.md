---
Title: Flask Mega Tutorila, Paas version(SAE), part II
Date: 2014-01-29 22:55
---

Probably all of you learn Flask studies via [The Flask Mega-Tutorial](http://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-i-hello-world). Even though I believe it's typical that starting a tutorial for beginners to start learn by standlone env, a Paas version would be suiable for beginers who are aiming for using Paas as Infrustruction as Paas is "next big thing" and it's popular all over the word even in China. That's enough talk, let's get the work done.

List of tutorials:

1. [getting started and basic configurations in SAE](.)
2. [template]

Recap
=======
What we already have now is:



Why we need template?
========================



"Hello World" from Flask in SAE
===============================

## First impression of template engine in Flask
###add index template
create a templates folder in app, the content is 
```html
<html>
  <head>
    <title>{{title}} - microblog</title>
  </head>
  <body>
      <h1>Hello, {{user.nickname}}!</h1>
  </body>
</html>
```

###modify view to render from template

view will change into:

```python
from flask import render_template
from app import app

@app.route('/')
@app.route('/index')
def index():
    user = { 'nickname': 'Miguel' } # fake user
    return render_template("index.html",
        title = 'Home',
        user = user)
```

Then you will find you pass the user name into the template. Jinja2 take care of ...

## Higher level templated skills
Let move on for more details

### Control

*The Jinja2 templates also support control statements, given inside {%...%} blocks*.
update index template like this:

```html
<html>
  <head>
    {% if title %}
    <title>{{title}} - microblog</title>
    {% else %}
    <title>Welcome to microblog</title>
    {% endif %}
  </head>
  <body>
      <h1>Hello, {{user.nickname}}!</h1>
  </body>
</html>
```
Then, feel free to remove the `title` argue in view.py, you will find that logic in index.html will handle missing title situation.

### Loop
First of all, you need provide contents(like `posts` as argue here) in view to show in templates. update `view.py` as the following:
```python
from app import app
from flask import render_template

@app.route('/')
@app.route('/index')
def index():
    user = {'nickname': "SAE User"} #fake
    posts = [ # fake array of posts
        { 
            'author': { 'nickname': 'John' }, 
            'body': 'Beautiful day in Portland!' 
        },
        { 
            'author': { 'nickname': 'Susan' }, 
            'body': 'The Avengers movie was so cool!' 
        }
    ]
    return render_template("index.html",
        title = 'Home',
        user = user,
        posts = posts)
```
Then, let us take a look at how `for` loop works in `index.html`jinja2:
```html
<html>
  <head>
    {% if title %}
    <title>{{title}} - microblog</title>
    {% else %}
    <title>microblog</title>
    {% endif %}
  </head>
  <body>
    <h1>Hi, {{user.nickname}}!</h1>
    {% for post in posts %}
    <p>{{post.author.nickname}} says: <b>{{post.body}}</b></p>
    {% endfor %}
  </body>
</html>
```

###Tempalte Inheritance
I could imagine how boring it is to repeat `head` stuff in htmls everytime when you create tempaltes, while thanks to inheritance of Jinja2, we could make our life easier by creating `base.html`, in this file we store all the repeating stuff for other siblings of our apps.
```html
<html>
  <head>
    {% if title %}
    <title>{{title}} - microblog</title>
    {% else %}
    <title>microblog</title>
    {% endif %}
  </head>
  <body>
    <div>Microblog: <a href="/index">Home</a></div>
    <hr>
    {% block content %}{% endblock %}
  </body>
</html>
```
Then, other templates could reuse the generic stuff and do it own specific logic, like `index.html`:
```html
{% extends "base.html" %}
{% block content %}
<h1>Hi, {{user.nickname}}!</h1>
{% for post in posts %}
<div><p>{{post.author.nickname}} says: <b>{{post.body}}</b></p></div>
{% endfor %}
{% endblock %}
```

Ready to go
===========
SVN update and visit your application ID in this version to enjoy what you've done already!
You could always refer [here](http://2.flasktutorial.sinaapp.com/) to see what is expected.